<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (16) -->
<title>Source code</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="source: package: squidpony, class: GridCompression">
<meta name="generator" content="javadoc/SourceToHTMLConverter">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body class="source-page">
<main role="main">
<div class="source-container">
<pre><span class="source-line-no">001</span><span id="line.1">package squidpony;</span>
<span class="source-line-no">002</span><span id="line.2"></span>
<span class="source-line-no">003</span><span id="line.3">import squidpony.annotation.Beta;</span>
<span class="source-line-no">004</span><span id="line.4">import squidpony.squidmath.CoordPacker;</span>
<span class="source-line-no">005</span><span id="line.5"></span>
<span class="source-line-no">006</span><span id="line.6">/**</span>
<span class="source-line-no">007</span><span id="line.7"> * Very early way of additional compression that can be applied to 2D double and byte arrays. This doesn't compress a</span>
<span class="source-line-no">008</span><span id="line.8"> * well as using {@link LZSEncoding} on a simply-serialized String produced by {@link Converters#convertArrayDouble2D},</span>
<span class="source-line-no">009</span><span id="line.9"> * but you can use LZSEncoding on the results of this class to significantly reduce output size. Testing on a heat map</span>
<span class="source-line-no">010</span><span id="line.10"> * of byte values from -128 to 127 from a world map:</span>
<span class="source-line-no">011</span><span id="line.11"> * &lt;pre&gt;</span>
<span class="source-line-no">012</span><span id="line.12"> * Base size   : 1143142 // this is an uncompressed String produced by Converters</span>
<span class="source-line-no">013</span><span id="line.13"> * LZS size    : 89170   // this uses LZSEncoding alone on the above Base string</span>
<span class="source-line-no">014</span><span id="line.14"> * Custom size : 216209  // this uses GridCompression alone</span>
<span class="source-line-no">015</span><span id="line.15"> * Both size   : 43120   // this uses GridCompression followed by LZSEncoding</span>
<span class="source-line-no">016</span><span id="line.16"> * &lt;/pre&gt;</span>
<span class="source-line-no">017</span><span id="line.17"> * &lt;br&gt;</span>
<span class="source-line-no">018</span><span id="line.18"> * This class is marked Beta because it still has some improvement that can be done on it, like having more support for</span>
<span class="source-line-no">019</span><span id="line.19"> * other array types.</span>
<span class="source-line-no">020</span><span id="line.20"> * &lt;br&gt;</span>
<span class="source-line-no">021</span><span id="line.21"> * Created by Tommy Ettinger on 4/27/2020.</span>
<span class="source-line-no">022</span><span id="line.22"> */</span>
<span class="source-line-no">023</span><span id="line.23">@Beta</span>
<span class="source-line-no">024</span><span id="line.24">public class GridCompression {</span>
<span class="source-line-no">025</span><span id="line.25">    public static String compress(double[][] grid)</span>
<span class="source-line-no">026</span><span id="line.26">    {</span>
<span class="source-line-no">027</span><span id="line.27">        return compress(doubleToByteGrid(grid));</span>
<span class="source-line-no">028</span><span id="line.28">    }</span>
<span class="source-line-no">029</span><span id="line.29">    public static String compress(byte[][] grid)</span>
<span class="source-line-no">030</span><span id="line.30">    {</span>
<span class="source-line-no">031</span><span id="line.31">        CoordPacker.init();</span>
<span class="source-line-no">032</span><span id="line.32">        final int width = grid.length, height = grid[0].length;</span>
<span class="source-line-no">033</span><span id="line.33">        StringBuilder[] packs = new StringBuilder[8];</span>
<span class="source-line-no">034</span><span id="line.34">        for (int i = 0; i &lt; 8; i++) {</span>
<span class="source-line-no">035</span><span id="line.35">            packs[i] = new StringBuilder(width * height &gt;&gt; 3);</span>
<span class="source-line-no">036</span><span id="line.36">        }</span>
<span class="source-line-no">037</span><span id="line.37">        StringBuilder packing = new StringBuilder(width * height + 128);</span>
<span class="source-line-no">038</span><span id="line.38">        StringKit.appendHex(packing, width);</span>
<span class="source-line-no">039</span><span id="line.39">        StringKit.appendHex(packing, height);</span>
<span class="source-line-no">040</span><span id="line.40">        final int chunksX = width + 255 &gt;&gt; 8, chunksY = height + 127 &gt;&gt; 7;</span>
<span class="source-line-no">041</span><span id="line.41">        short[] skip = new short[8];</span>
<span class="source-line-no">042</span><span id="line.42">        boolean[] on = new boolean[8];</span>
<span class="source-line-no">043</span><span id="line.43">        for (int bigX = 0, baseX = 0; bigX &lt; chunksX; bigX++, baseX += 256) {</span>
<span class="source-line-no">044</span><span id="line.44">            for (int bigY = 0, baseY = 0; bigY &lt; chunksY; bigY++, baseY += 128) {</span>
<span class="source-line-no">045</span><span id="line.45">                for (int p = 0; p &lt; 8; p++) {</span>
<span class="source-line-no">046</span><span id="line.46">                    packs[p].append(';');</span>
<span class="source-line-no">047</span><span id="line.47">                    skip[p] = 0;</span>
<span class="source-line-no">048</span><span id="line.48">                    on[p] = false;</span>
<span class="source-line-no">049</span><span id="line.49">                }</span>
<span class="source-line-no">050</span><span id="line.50">                boolean current;</span>
<span class="source-line-no">051</span><span id="line.51">                short hx, hy;</span>
<span class="source-line-no">052</span><span id="line.52">                int xSize = Math.min(256, width - baseX), ySize = Math.min(128, height - baseY),</span>
<span class="source-line-no">053</span><span id="line.53">                        limit = 0x8000, mapLimit = xSize * ySize, code;</span>
<span class="source-line-no">054</span><span id="line.54">                if (xSize &lt;= 128) {</span>
<span class="source-line-no">055</span><span id="line.55">                    limit &gt;&gt;= 1;</span>
<span class="source-line-no">056</span><span id="line.56">                    if (xSize &lt;= 64) {</span>
<span class="source-line-no">057</span><span id="line.57">                        limit &gt;&gt;= 1;</span>
<span class="source-line-no">058</span><span id="line.58">                        if (ySize &lt;= 64) {</span>
<span class="source-line-no">059</span><span id="line.59">                            limit &gt;&gt;= 1;</span>
<span class="source-line-no">060</span><span id="line.60">                            if (ySize &lt;= 32) {</span>
<span class="source-line-no">061</span><span id="line.61">                                limit &gt;&gt;= 1;</span>
<span class="source-line-no">062</span><span id="line.62">                                if (xSize &lt;= 32) {</span>
<span class="source-line-no">063</span><span id="line.63">                                    limit &gt;&gt;= 1;</span>
<span class="source-line-no">064</span><span id="line.64">                                }</span>
<span class="source-line-no">065</span><span id="line.65">                            }</span>
<span class="source-line-no">066</span><span id="line.66">                        }</span>
<span class="source-line-no">067</span><span id="line.67">                    }</span>
<span class="source-line-no">068</span><span id="line.68">                }</span>
<span class="source-line-no">069</span><span id="line.69">                for (int i = 0, ml = 0; i &lt; limit &amp;&amp; ml &lt; mapLimit; i++) {</span>
<span class="source-line-no">070</span><span id="line.70">                    hx = CoordPacker.hilbertX[i];</span>
<span class="source-line-no">071</span><span id="line.71">                    hy = CoordPacker.hilbertY[i];</span>
<span class="source-line-no">072</span><span id="line.72">                    if (hx &gt;= xSize || hy &gt;= ySize) {</span>
<span class="source-line-no">073</span><span id="line.73">                        for (int p = 0; p &lt; 8; p++) {</span>
<span class="source-line-no">074</span><span id="line.74">                            if (on[p]) {</span>
<span class="source-line-no">075</span><span id="line.75">                                on[p] = false;</span>
<span class="source-line-no">076</span><span id="line.76">                                packs[p].append((char) (skip[p] + 256));</span>
<span class="source-line-no">077</span><span id="line.77">                                skip[p] = 0;</span>
<span class="source-line-no">078</span><span id="line.78">                            }</span>
<span class="source-line-no">079</span><span id="line.79">                        }</span>
<span class="source-line-no">080</span><span id="line.80">                        for (int p = 0; p &lt; 8; p++) {</span>
<span class="source-line-no">081</span><span id="line.81">                            skip[p]++;</span>
<span class="source-line-no">082</span><span id="line.82">                        }</span>
<span class="source-line-no">083</span><span id="line.83">                        continue;</span>
<span class="source-line-no">084</span><span id="line.84">                    }</span>
<span class="source-line-no">085</span><span id="line.85">                    ml++;</span>
<span class="source-line-no">086</span><span id="line.86">                    code = (grid[baseX + hx][baseY + hy] &amp; 255);</span>
<span class="source-line-no">087</span><span id="line.87">                    code ^= code &gt;&gt;&gt; 1; // gray code; ensures only one bit changes between consecutive bytes</span>
<span class="source-line-no">088</span><span id="line.88">                    for (int p = 0; p &lt; 8; p++) {</span>
<span class="source-line-no">089</span><span id="line.89">                        current = (code &gt;&gt;&gt; p &amp; 1) == 1;</span>
<span class="source-line-no">090</span><span id="line.90">                        if (current != on[p]) {</span>
<span class="source-line-no">091</span><span id="line.91">                            packs[p].append((char) (skip[p] + 256));</span>
<span class="source-line-no">092</span><span id="line.92">                            skip[p] = 0;</span>
<span class="source-line-no">093</span><span id="line.93">                            on[p] = current;</span>
<span class="source-line-no">094</span><span id="line.94">                        }</span>
<span class="source-line-no">095</span><span id="line.95">                    }</span>
<span class="source-line-no">096</span><span id="line.96">                    for (int p = 0; p &lt; 8; p++) {</span>
<span class="source-line-no">097</span><span id="line.97">                        skip[p]++;</span>
<span class="source-line-no">098</span><span id="line.98">                    }</span>
<span class="source-line-no">099</span><span id="line.99">                }</span>
<span class="source-line-no">100</span><span id="line.100">                for (int p = 0; p &lt; 8; p++) {</span>
<span class="source-line-no">101</span><span id="line.101">                    if (on[p])</span>
<span class="source-line-no">102</span><span id="line.102">                    {</span>
<span class="source-line-no">103</span><span id="line.103">                        packs[p].append((char) (skip[p] + 256));</span>
<span class="source-line-no">104</span><span id="line.104">                    }</span>
<span class="source-line-no">105</span><span id="line.105">                }</span>
<span class="source-line-no">106</span><span id="line.106">            }</span>
<span class="source-line-no">107</span><span id="line.107">        }</span>
<span class="source-line-no">108</span><span id="line.108">        packing.append(packs[0]);</span>
<span class="source-line-no">109</span><span id="line.109">        for (int p = 1; p &lt; 8; p++) {</span>
<span class="source-line-no">110</span><span id="line.110">            packing.append('.').append(packs[p]);</span>
<span class="source-line-no">111</span><span id="line.111">        }</span>
<span class="source-line-no">112</span><span id="line.112">        return packing.toString();</span>
<span class="source-line-no">113</span><span id="line.113">    }</span>
<span class="source-line-no">114</span><span id="line.114">    public static byte[][] decompress(String compressed)</span>
<span class="source-line-no">115</span><span id="line.115">    {</span>
<span class="source-line-no">116</span><span id="line.116">        CoordPacker.init();</span>
<span class="source-line-no">117</span><span id="line.117">        final int width = StringKit.intFromHex(compressed), height = StringKit.intFromHex(compressed, 8, 16);</span>
<span class="source-line-no">118</span><span id="line.118">        byte[][] target = new byte[width][height];</span>
<span class="source-line-no">119</span><span id="line.119">        final int chunksX = width + 255 &gt;&gt; 8, chunksY = height + 127 &gt;&gt; 7;</span>
<span class="source-line-no">120</span><span id="line.120">        int startPack = 16, endPack, endLayer, idx;</span>
<span class="source-line-no">121</span><span id="line.121">        boolean on;</span>
<span class="source-line-no">122</span><span id="line.122">        for (int b = 0; b &lt; 8; b++) {</span>
<span class="source-line-no">123</span><span id="line.123">            endLayer = compressed.indexOf('.', startPack+1);</span>
<span class="source-line-no">124</span><span id="line.124">            if (endLayer &lt; 0) endLayer = compressed.length();</span>
<span class="source-line-no">125</span><span id="line.125">            for (int bigX = 0, baseX = 0; bigX &lt; chunksX; bigX++, baseX += 256) {</span>
<span class="source-line-no">126</span><span id="line.126">                for (int bigY = 0, baseY = 0; bigY &lt; chunksY; bigY++, baseY += 128) {</span>
<span class="source-line-no">127</span><span id="line.127">                    ++startPack;</span>
<span class="source-line-no">128</span><span id="line.128">                    endPack = Math.min(endLayer, compressed.indexOf(';', startPack));</span>
<span class="source-line-no">129</span><span id="line.129">                    if (endPack &lt; 0) endPack = endLayer;</span>
<span class="source-line-no">130</span><span id="line.130">                    on = false;</span>
<span class="source-line-no">131</span><span id="line.131">                    idx = 0;</span>
<span class="source-line-no">132</span><span id="line.132">                    for (int p = startPack; p &lt; endPack; p++, on = !on) {</span>
<span class="source-line-no">133</span><span id="line.133">                        if (on) {</span>
<span class="source-line-no">134</span><span id="line.134">                            for (int toSkip = idx + (compressed.charAt(p) - 256); idx &lt; toSkip &amp;&amp; idx &lt; 0x8000; idx++) {</span>
<span class="source-line-no">135</span><span id="line.135">                                target[CoordPacker.hilbertX[idx] + baseX][CoordPacker.hilbertY[idx] + baseY] |= 1 &lt;&lt; b;</span>
<span class="source-line-no">136</span><span id="line.136">                            }</span>
<span class="source-line-no">137</span><span id="line.137">                        } else {</span>
<span class="source-line-no">138</span><span id="line.138">                            idx += compressed.charAt(p) - 256;</span>
<span class="source-line-no">139</span><span id="line.139">                        }</span>
<span class="source-line-no">140</span><span id="line.140">                    }</span>
<span class="source-line-no">141</span><span id="line.141">                    startPack = endPack;</span>
<span class="source-line-no">142</span><span id="line.142">                }</span>
<span class="source-line-no">143</span><span id="line.143">            }</span>
<span class="source-line-no">144</span><span id="line.144">            ++startPack;</span>
<span class="source-line-no">145</span><span id="line.145">        }</span>
<span class="source-line-no">146</span><span id="line.146">        for (int x = 0; x &lt; width; x++) {</span>
<span class="source-line-no">147</span><span id="line.147">            for (int y = 0; y &lt; height; y++) {</span>
<span class="source-line-no">148</span><span id="line.148">                int b = target[x][y] &amp; 0xFF;</span>
<span class="source-line-no">149</span><span id="line.149">                b ^= b &gt;&gt;&gt; 1;</span>
<span class="source-line-no">150</span><span id="line.150">                b ^= b &gt;&gt;&gt; 2;</span>
<span class="source-line-no">151</span><span id="line.151">                target[x][y] = (byte)(b ^ b &gt;&gt;&gt; 4);</span>
<span class="source-line-no">152</span><span id="line.152">            }</span>
<span class="source-line-no">153</span><span id="line.153">        }</span>
<span class="source-line-no">154</span><span id="line.154">        return target;</span>
<span class="source-line-no">155</span><span id="line.155">    }</span>
<span class="source-line-no">156</span><span id="line.156">    public static double[][] byteToDoubleGrid(byte[][] bytes) {</span>
<span class="source-line-no">157</span><span id="line.157">        return byteToDoubleGrid(bytes, new double[bytes.length][bytes[0].length]);</span>
<span class="source-line-no">158</span><span id="line.158">    }</span>
<span class="source-line-no">159</span><span id="line.159">    public static double[][] byteToDoubleGrid(byte[][] bytes, double[][] doubles) {</span>
<span class="source-line-no">160</span><span id="line.160">        final int width = Math.min(bytes.length, doubles.length),</span>
<span class="source-line-no">161</span><span id="line.161">                height = Math.min(bytes[0].length, doubles[0].length);</span>
<span class="source-line-no">162</span><span id="line.162">        for (int x = 0; x &lt; width; x++) {</span>
<span class="source-line-no">163</span><span id="line.163">            for (int y = 0; y &lt; height; y++) {</span>
<span class="source-line-no">164</span><span id="line.164">                doubles[x][y] = (bytes[x][y] &amp; 0xFF) * 0x1p-8;</span>
<span class="source-line-no">165</span><span id="line.165">            }</span>
<span class="source-line-no">166</span><span id="line.166">        }</span>
<span class="source-line-no">167</span><span id="line.167">        return doubles;</span>
<span class="source-line-no">168</span><span id="line.168">    }</span>
<span class="source-line-no">169</span><span id="line.169">    public static byte[][] doubleToByteGrid(double[][] doubles) {</span>
<span class="source-line-no">170</span><span id="line.170">        return doubleToByteGrid(doubles, new byte[doubles.length][doubles[0].length]);</span>
<span class="source-line-no">171</span><span id="line.171">    }</span>
<span class="source-line-no">172</span><span id="line.172">    public static byte[][] doubleToByteGrid(double[][] doubles, byte[][] bytes) {</span>
<span class="source-line-no">173</span><span id="line.173">        final int width = Math.min(doubles.length, bytes.length),</span>
<span class="source-line-no">174</span><span id="line.174">                height = Math.min(doubles[0].length, bytes[0].length);</span>
<span class="source-line-no">175</span><span id="line.175">        for (int x = 0; x &lt; width; x++) {</span>
<span class="source-line-no">176</span><span id="line.176">            for (int y = 0; y &lt; height; y++) {</span>
<span class="source-line-no">177</span><span id="line.177">                bytes[x][y] = (byte) (doubles[x][y] * 256);</span>
<span class="source-line-no">178</span><span id="line.178">            }</span>
<span class="source-line-no">179</span><span id="line.179">        }</span>
<span class="source-line-no">180</span><span id="line.180">        return bytes;</span>
<span class="source-line-no">181</span><span id="line.181">    }</span>
<span class="source-line-no">182</span><span id="line.182">    public static byte[] doubleGridToByteArray(double[][] doubles) {</span>
<span class="source-line-no">183</span><span id="line.183">        final int width = doubles.length, height = doubles[0].length;</span>
<span class="source-line-no">184</span><span id="line.184">        byte[] bytes = new byte[width * height + 8];</span>
<span class="source-line-no">185</span><span id="line.185">        bytes[0] = (byte) (width &gt;&gt;&gt; 24);</span>
<span class="source-line-no">186</span><span id="line.186">        bytes[1] = (byte) (width &gt;&gt;&gt; 16);</span>
<span class="source-line-no">187</span><span id="line.187">        bytes[2] = (byte) (width &gt;&gt;&gt; 8);</span>
<span class="source-line-no">188</span><span id="line.188">        bytes[3] = (byte) (width);</span>
<span class="source-line-no">189</span><span id="line.189">        bytes[4] = (byte) (height &gt;&gt;&gt; 24);</span>
<span class="source-line-no">190</span><span id="line.190">        bytes[5] = (byte) (height &gt;&gt;&gt; 16);</span>
<span class="source-line-no">191</span><span id="line.191">        bytes[6] = (byte) (height &gt;&gt;&gt; 8);</span>
<span class="source-line-no">192</span><span id="line.192">        bytes[7] = (byte) (height);</span>
<span class="source-line-no">193</span><span id="line.193">        int i = 8;</span>
<span class="source-line-no">194</span><span id="line.194">        for (int x = 0; x &lt; width; x++) {</span>
<span class="source-line-no">195</span><span id="line.195">            for (int y = 0; y &lt; height; y++) {</span>
<span class="source-line-no">196</span><span id="line.196">                bytes[i++] = (byte)(doubles[x][y] * 256);</span>
<span class="source-line-no">197</span><span id="line.197">            }</span>
<span class="source-line-no">198</span><span id="line.198">        }</span>
<span class="source-line-no">199</span><span id="line.199">        return bytes;</span>
<span class="source-line-no">200</span><span id="line.200">    }</span>
<span class="source-line-no">201</span><span id="line.201">    public static double[][] byteArrayToDoubleGrid(byte[] bytes) {</span>
<span class="source-line-no">202</span><span id="line.202">        final int width = bytes[0] &lt;&lt; 24 | (bytes[1] &lt;&lt; 16 &amp; 0xFF0000) | (bytes[2] &lt;&lt; 8 &amp; 0xFF00) | (bytes[3] &amp; 0xFF),</span>
<span class="source-line-no">203</span><span id="line.203">                height = bytes[4] &lt;&lt; 24 | (bytes[5] &lt;&lt; 16 &amp; 0xFF0000) | (bytes[6] &lt;&lt; 8 &amp; 0xFF00) | (bytes[7] &amp; 0xFF);</span>
<span class="source-line-no">204</span><span id="line.204">        double[][] doubles = new double[width][height];</span>
<span class="source-line-no">205</span><span id="line.205">        int i = 8;</span>
<span class="source-line-no">206</span><span id="line.206">        for (int x = 0; x &lt; width; x++) {</span>
<span class="source-line-no">207</span><span id="line.207">            for (int y = 0; y &lt; height; y++) {</span>
<span class="source-line-no">208</span><span id="line.208">                doubles[x][y] = (bytes[i++] &amp; 0xFF) * 0x1p-8;</span>
<span class="source-line-no">209</span><span id="line.209">            }</span>
<span class="source-line-no">210</span><span id="line.210">        }</span>
<span class="source-line-no">211</span><span id="line.211">        return doubles;</span>
<span class="source-line-no">212</span><span id="line.212">    }</span>
<span class="source-line-no">213</span><span id="line.213"></span>
<span class="source-line-no">214</span><span id="line.214">    public static byte[] byteGridToByteArray(byte[][] grid) {</span>
<span class="source-line-no">215</span><span id="line.215">        final int width = grid.length, height = grid[0].length;</span>
<span class="source-line-no">216</span><span id="line.216">        byte[] bytes = new byte[width * height + 8];</span>
<span class="source-line-no">217</span><span id="line.217">        bytes[0] = (byte) (width &gt;&gt;&gt; 24);</span>
<span class="source-line-no">218</span><span id="line.218">        bytes[1] = (byte) (width &gt;&gt;&gt; 16);</span>
<span class="source-line-no">219</span><span id="line.219">        bytes[2] = (byte) (width &gt;&gt;&gt; 8);</span>
<span class="source-line-no">220</span><span id="line.220">        bytes[3] = (byte) (width);</span>
<span class="source-line-no">221</span><span id="line.221">        bytes[4] = (byte) (height &gt;&gt;&gt; 24);</span>
<span class="source-line-no">222</span><span id="line.222">        bytes[5] = (byte) (height &gt;&gt;&gt; 16);</span>
<span class="source-line-no">223</span><span id="line.223">        bytes[6] = (byte) (height &gt;&gt;&gt; 8);</span>
<span class="source-line-no">224</span><span id="line.224">        bytes[7] = (byte) (height);</span>
<span class="source-line-no">225</span><span id="line.225">        int i = 8;</span>
<span class="source-line-no">226</span><span id="line.226">        for (int x = 0; x &lt; width; x++) {</span>
<span class="source-line-no">227</span><span id="line.227">            for (int y = 0; y &lt; height; y++) {</span>
<span class="source-line-no">228</span><span id="line.228">                bytes[i++] = grid[x][y];</span>
<span class="source-line-no">229</span><span id="line.229">            }</span>
<span class="source-line-no">230</span><span id="line.230">        }</span>
<span class="source-line-no">231</span><span id="line.231">        return bytes;</span>
<span class="source-line-no">232</span><span id="line.232">    }</span>
<span class="source-line-no">233</span><span id="line.233">    public static byte[][] byteArrayToByteGrid(byte[] bytes) {</span>
<span class="source-line-no">234</span><span id="line.234">        final int width = bytes[0] &lt;&lt; 24 | (bytes[1] &lt;&lt; 16 &amp; 0xFF0000) | (bytes[2] &lt;&lt; 8 &amp; 0xFF00) | (bytes[3] &amp; 0xFF),</span>
<span class="source-line-no">235</span><span id="line.235">                height = bytes[4] &lt;&lt; 24 | (bytes[5] &lt;&lt; 16 &amp; 0xFF0000) | (bytes[6] &lt;&lt; 8 &amp; 0xFF00) | (bytes[7] &amp; 0xFF);</span>
<span class="source-line-no">236</span><span id="line.236">        byte[][] grid = new byte[width][height];</span>
<span class="source-line-no">237</span><span id="line.237">        int i = 8;</span>
<span class="source-line-no">238</span><span id="line.238">        for (int x = 0; x &lt; width; x++) {</span>
<span class="source-line-no">239</span><span id="line.239">            for (int y = 0; y &lt; height; y++) {</span>
<span class="source-line-no">240</span><span id="line.240">                grid[x][y] = bytes[i++];</span>
<span class="source-line-no">241</span><span id="line.241">            }</span>
<span class="source-line-no">242</span><span id="line.242">        }</span>
<span class="source-line-no">243</span><span id="line.243">        return grid;</span>
<span class="source-line-no">244</span><span id="line.244">    }</span>
<span class="source-line-no">245</span><span id="line.245"></span>
<span class="source-line-no">246</span><span id="line.246">}</span>




























































</pre>
</div>
</main>
</body>
</html>
