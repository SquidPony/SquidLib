<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>Source code</title>
<meta name="description" content="source: package: squidpony, class: MonsterGen">
<meta name="generator" content="javadoc/SourceToHTMLConverter">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body class="source-page">
<main role="main">
<div class="source-container">
<pre><span class="source-line-no">001</span><span id="line.1">package squidpony;</span>
<span class="source-line-no">002</span><span id="line.2"></span>
<span class="source-line-no">003</span><span id="line.3">import squidpony.squidmath.*;</span>
<span class="source-line-no">004</span><span id="line.4"></span>
<span class="source-line-no">005</span><span id="line.5">import java.util.*;</span>
<span class="source-line-no">006</span><span id="line.6"></span>
<span class="source-line-no">007</span><span id="line.7">/**</span>
<span class="source-line-no">008</span><span id="line.8"> * A class for generating random monster descriptions; can be subclassed to generate stats for a specific game. Use the</span>
<span class="source-line-no">009</span><span id="line.9"> * nested Chimera class for most of the functionality here; MonsterGen is here so you can change the descriptors that</span>
<span class="source-line-no">010</span><span id="line.10"> * monsters can be given (they are in public array fields). You can call randomizeAppearance or randomizePowers on a</span>
<span class="source-line-no">011</span><span id="line.11"> * Chimera to draw from the list of descriptors in MonsterGen, or fuse two Chimera objects with the mix method in the</span>
<span class="source-line-no">012</span><span id="line.12"> * Chimera class. Chimeras can be printed to a usable format with presentVisible or present; the former does not print</span>
<span class="source-line-no">013</span><span id="line.13"> * special powers and is suitable for monsters being encountered, and the latter is more useful for texts in the game</span>
<span class="source-line-no">014</span><span id="line.14"> * world that describe some monster.</span>
<span class="source-line-no">015</span><span id="line.15"> * Created by Tommy Ettinger on 1/31/2016.</span>
<span class="source-line-no">016</span><span id="line.16"> */</span>
<span class="source-line-no">017</span><span id="line.17">public class MonsterGen {</span>
<span class="source-line-no">018</span><span id="line.18"></span>
<span class="source-line-no">019</span><span id="line.19">    public static StatefulRNG srng = new StatefulRNG();</span>
<span class="source-line-no">020</span><span id="line.20"></span>
<span class="source-line-no">021</span><span id="line.21">    public String[] components = new String[]{"head", "tail", "legs", "claws", "fangs", "eyes", "hooves", "beak",</span>
<span class="source-line-no">022</span><span id="line.22">            "wings", "pseudopods", "snout", "carapace", "sting", "pincers", "fins", "shell"},</span>
<span class="source-line-no">023</span><span id="line.23">            adjectives = new String[]{"hairy", "scaly", "feathered", "chitinous", "pulpy", "writhing", "horrid",</span>
<span class="source-line-no">024</span><span id="line.24">            "fuzzy", "reptilian", "avian", "insectoid", "tentacled", "thorny", "angular", "curvaceous", "lean",</span>
<span class="source-line-no">025</span><span id="line.25">            "metallic", "stony", "glassy", "gaunt", "obese", "ill-proportioned", "sickly", "asymmetrical", "muscular"},</span>
<span class="source-line-no">026</span><span id="line.26">    powerAdjectives = new String[]{"fire-breathing", "electrified", "frigid", "toxic", "noxious", "nimble",</span>
<span class="source-line-no">027</span><span id="line.27">            "brutish", "bloodthirsty", "furious", "reflective", "regenerating", "earth-shaking", "thunderous",</span>
<span class="source-line-no">028</span><span id="line.28">            "screeching", "all-seeing", "semi-corporeal", "vampiric", "skulking", "terrifying", "undead", "mechanical",</span>
<span class="source-line-no">029</span><span id="line.29">            "angelic", "plant-like", "fungal", "contagious", "graceful", "malevolent", "gigantic", "wailing"},</span>
<span class="source-line-no">030</span><span id="line.30">    powerPhrases = new String[]{"can evoke foul magic", "can petrify with its gaze", "hurts your eyes to look at",</span>
<span class="source-line-no">031</span><span id="line.31">            "can spit venom", "can cast arcane spells", "can call on divine power", "embodies the wilderness",</span>
<span class="source-line-no">032</span><span id="line.32">            "hates all other species", "constantly drools acid", "whispers maddening secrets in forgotten tongues",</span>
<span class="source-line-no">033</span><span id="line.33">            "shudders between impossible dimensions", "withers any life around it", "revels in pain"};</span>
<span class="source-line-no">034</span><span id="line.34"></span>
<span class="source-line-no">035</span><span id="line.35">    /**</span>
<span class="source-line-no">036</span><span id="line.36">     * A creature that can be mixed with other Chimeras or given additional descriptors, then printed in a usable format</span>
<span class="source-line-no">037</span><span id="line.37">     * for game text.</span>
<span class="source-line-no">038</span><span id="line.38">     */</span>
<span class="source-line-no">039</span><span id="line.39">    public static class Chimera</span>
<span class="source-line-no">040</span><span id="line.40">    {</span>
<span class="source-line-no">041</span><span id="line.41">        public OrderedMap&lt;String, List&lt;String&gt;&gt; parts;</span>
<span class="source-line-no">042</span><span id="line.42">        public OrderedSet&lt;String&gt; unsaidAdjectives, wholeAdjectives, powerAdjectives, powerPhrases;</span>
<span class="source-line-no">043</span><span id="line.43">        public String name, mainForm, unknown;</span>
<span class="source-line-no">044</span><span id="line.44"></span>
<span class="source-line-no">045</span><span id="line.45">        /**</span>
<span class="source-line-no">046</span><span id="line.46">         * Copies an existing Chimera other into a new Chimera with potentially a different name.</span>
<span class="source-line-no">047</span><span id="line.47">         * @param name the name to use for the Chimera this constructs</span>
<span class="source-line-no">048</span><span id="line.48">         * @param other the existing Chimera to copy all fields but name from.</span>
<span class="source-line-no">049</span><span id="line.49">         */</span>
<span class="source-line-no">050</span><span id="line.50">        public Chimera(String name, Chimera other)</span>
<span class="source-line-no">051</span><span id="line.51">        {</span>
<span class="source-line-no">052</span><span id="line.52">            this.name = name;</span>
<span class="source-line-no">053</span><span id="line.53">            unknown = other.unknown;</span>
<span class="source-line-no">054</span><span id="line.54">            if(unknown != null)</span>
<span class="source-line-no">055</span><span id="line.55">                mainForm = unknown;</span>
<span class="source-line-no">056</span><span id="line.56">            else</span>
<span class="source-line-no">057</span><span id="line.57">                mainForm = other.name;</span>
<span class="source-line-no">058</span><span id="line.58">            parts = new OrderedMap&lt;&gt;(other.parts);</span>
<span class="source-line-no">059</span><span id="line.59">            List&lt;String&gt; oldParts = new ArrayList&lt;&gt;(parts.remove(mainForm));</span>
<span class="source-line-no">060</span><span id="line.60">            parts.put(name, oldParts);</span>
<span class="source-line-no">061</span><span id="line.61">            unsaidAdjectives = new OrderedSet&lt;&gt;(other.unsaidAdjectives);</span>
<span class="source-line-no">062</span><span id="line.62">            wholeAdjectives = new OrderedSet&lt;&gt;(other.wholeAdjectives);</span>
<span class="source-line-no">063</span><span id="line.63">            powerAdjectives = new OrderedSet&lt;&gt;(other.powerAdjectives);</span>
<span class="source-line-no">064</span><span id="line.64">            powerPhrases = new OrderedSet&lt;&gt;(other.powerPhrases);</span>
<span class="source-line-no">065</span><span id="line.65">        }</span>
<span class="source-line-no">066</span><span id="line.66"></span>
<span class="source-line-no">067</span><span id="line.67">        /**</span>
<span class="source-line-no">068</span><span id="line.68">         * Constructs a Chimera given a name (typically all lower-case), null if the creature is familiar or a String if</span>
<span class="source-line-no">069</span><span id="line.69">         * the creature's basic shape is likely to be unknown to players, and an array or vararg of String terms</span>
<span class="source-line-no">070</span><span id="line.70">         * containing, usually, several groups of String elements separated by the literal string ";" . The first group</span>
<span class="source-line-no">071</span><span id="line.71">         * in terms contains what body parts this creature has and could potentially grant to another creature if mixed;</span>
<span class="source-line-no">072</span><span id="line.72">         * examples are "head", "legs", "claws", "wings", and "eyes". In the next group are the "unsaid" adjectives,</span>
<span class="source-line-no">073</span><span id="line.73">         * which are not listed if unknown is false, but may be contributed to other creatures if mixed (mixing a horse</span>
<span class="source-line-no">074</span><span id="line.74">         * with a snake may make the horse scaly, since "scaly" is an unsaid adjective for snakes). Next are adjectives</span>
<span class="source-line-no">075</span><span id="line.75">         * that apply to the whole creature's appearance, which don't need to replicate the unsaid adjectives and are</span>
<span class="source-line-no">076</span><span id="line.76">         * often added as a step to randomize a creature; this part is often empty and simply ends on the separator ";"</span>
<span class="source-line-no">077</span><span id="line.77">         * . Next are the power adjectives, which are any special abilities a creature might have that aren't</span>
<span class="source-line-no">078</span><span id="line.78">         * immediately visible, like "furious" or "toxic". Last are the power phrases, which follow a format like "can</span>
<span class="source-line-no">079</span><span id="line.79">         * cast arcane spells", "embodies the wilderness", or "constantly drools acid"; it should be able to be put in a</span>
<span class="source-line-no">080</span><span id="line.80">         * sentence after the word "that", like "a snake that can cast arcane spells".</span>
<span class="source-line-no">081</span><span id="line.81">         * &lt;br&gt;</span>
<span class="source-line-no">082</span><span id="line.82">         * The unknown argument determines if descriptions need to include basic properties like calling a Snake scaly</span>
<span class="source-line-no">083</span><span id="line.83">         * (null in this case) or a Pestilence Fiend chitinous (no one knows what that creature is, so a String needs to</span>
<span class="source-line-no">084</span><span id="line.84">         * be given so a player and player character that don't know its name can call it something, like "demon").</span>
<span class="source-line-no">085</span><span id="line.85">         * &lt;br&gt;</span>
<span class="source-line-no">086</span><span id="line.86">         * An example is {@code Chimera SNAKE = new Chimera("snake", null, "head", "tail", "fangs", "eyes", ";",</span>
<span class="source-line-no">087</span><span id="line.87">         * "reptilian", "scaly", "lean", "curvaceous", ";", ";", "toxic");}</span>
<span class="source-line-no">088</span><span id="line.88">         * @param name the name to refer to the creature by and its body parts by when mixed</span>
<span class="source-line-no">089</span><span id="line.89">         * @param unknown true if the creature's basic shape is unlikely to be known by a player, false for animals and</span>
<span class="source-line-no">090</span><span id="line.90">         *                possibly common mythological creatures like dragons</span>
<span class="source-line-no">091</span><span id="line.91">         * @param terms an array or vararg of String elements, separated by ";" , see method documentation for details</span>
<span class="source-line-no">092</span><span id="line.92">         */</span>
<span class="source-line-no">093</span><span id="line.93">        public Chimera(String name, String unknown, String... terms)</span>
<span class="source-line-no">094</span><span id="line.94">        {</span>
<span class="source-line-no">095</span><span id="line.95">            this.name = name;</span>
<span class="source-line-no">096</span><span id="line.96">            this.unknown = unknown;</span>
<span class="source-line-no">097</span><span id="line.97">            if(unknown != null)</span>
<span class="source-line-no">098</span><span id="line.98">                mainForm = unknown;</span>
<span class="source-line-no">099</span><span id="line.99">            else</span>
<span class="source-line-no">100</span><span id="line.100">                mainForm = name;</span>
<span class="source-line-no">101</span><span id="line.101">            parts = new OrderedMap&lt;&gt;();</span>
<span class="source-line-no">102</span><span id="line.102">            unsaidAdjectives = new OrderedSet&lt;&gt;();</span>
<span class="source-line-no">103</span><span id="line.103">            wholeAdjectives = new OrderedSet&lt;&gt;();</span>
<span class="source-line-no">104</span><span id="line.104">            powerAdjectives = new OrderedSet&lt;&gt;();</span>
<span class="source-line-no">105</span><span id="line.105">            powerPhrases = new OrderedSet&lt;&gt;();</span>
<span class="source-line-no">106</span><span id="line.106">            ArrayList&lt;String&gt; selfParts = new ArrayList&lt;&gt;();</span>
<span class="source-line-no">107</span><span id="line.107">            int t = 0;</span>
<span class="source-line-no">108</span><span id="line.108">            for (; t &lt; terms.length; t++) {</span>
<span class="source-line-no">109</span><span id="line.109">                if(";".equals(terms[t]))</span>
<span class="source-line-no">110</span><span id="line.110">                {</span>
<span class="source-line-no">111</span><span id="line.111">                    t++;</span>
<span class="source-line-no">112</span><span id="line.112">                    break;</span>
<span class="source-line-no">113</span><span id="line.113">                }</span>
<span class="source-line-no">114</span><span id="line.114">                selfParts.add(terms[t]);</span>
<span class="source-line-no">115</span><span id="line.115">            }</span>
<span class="source-line-no">116</span><span id="line.116">            parts.put(name, selfParts);</span>
<span class="source-line-no">117</span><span id="line.117">            for (; t &lt; terms.length; t++) {</span>
<span class="source-line-no">118</span><span id="line.118">                if (";".equals(terms[t])) {</span>
<span class="source-line-no">119</span><span id="line.119">                    t++;</span>
<span class="source-line-no">120</span><span id="line.120">                    break;</span>
<span class="source-line-no">121</span><span id="line.121">                }</span>
<span class="source-line-no">122</span><span id="line.122">                unsaidAdjectives.add(terms[t]);</span>
<span class="source-line-no">123</span><span id="line.123">            }</span>
<span class="source-line-no">124</span><span id="line.124">            for (; t &lt; terms.length; t++) {</span>
<span class="source-line-no">125</span><span id="line.125">                if (";".equals(terms[t])) {</span>
<span class="source-line-no">126</span><span id="line.126">                    t++;</span>
<span class="source-line-no">127</span><span id="line.127">                    break;</span>
<span class="source-line-no">128</span><span id="line.128">                }</span>
<span class="source-line-no">129</span><span id="line.129">                wholeAdjectives.add(terms[t]);</span>
<span class="source-line-no">130</span><span id="line.130">            }</span>
<span class="source-line-no">131</span><span id="line.131">            wholeAdjectives.removeAll(unsaidAdjectives);</span>
<span class="source-line-no">132</span><span id="line.132">            for (; t &lt; terms.length; t++) {</span>
<span class="source-line-no">133</span><span id="line.133">                if (";".equals(terms[t])) {</span>
<span class="source-line-no">134</span><span id="line.134">                    t++;</span>
<span class="source-line-no">135</span><span id="line.135">                    break;</span>
<span class="source-line-no">136</span><span id="line.136">                }</span>
<span class="source-line-no">137</span><span id="line.137">                powerAdjectives.add(terms[t]);</span>
<span class="source-line-no">138</span><span id="line.138">            }</span>
<span class="source-line-no">139</span><span id="line.139">            for (; t &lt; terms.length; t++) {</span>
<span class="source-line-no">140</span><span id="line.140">                if (";".equals(terms[t])) {</span>
<span class="source-line-no">141</span><span id="line.141">                    break;</span>
<span class="source-line-no">142</span><span id="line.142">                }</span>
<span class="source-line-no">143</span><span id="line.143">                powerPhrases.add(terms[t]);</span>
<span class="source-line-no">144</span><span id="line.144">            }</span>
<span class="source-line-no">145</span><span id="line.145">        }</span>
<span class="source-line-no">146</span><span id="line.146">        /**</span>
<span class="source-line-no">147</span><span id="line.147">         * Constructs a Chimera given a name (typically all lower-case), null if the creature is familiar or a String if</span>
<span class="source-line-no">148</span><span id="line.148">         * the creature's basic shape is likely to be unknown to players, and several String Collection args for the</span>
<span class="source-line-no">149</span><span id="line.149">         * different aspects of the Chimera. The first Collection contains what body parts this creature has and could</span>
<span class="source-line-no">150</span><span id="line.150">         * potentially grant to another creature if mixed; examples are "head", "legs", "claws", "wings", and "eyes".</span>
<span class="source-line-no">151</span><span id="line.151">         * The next Collection contains "unsaid" adjectives, which are not listed if unknown is false, but may be</span>
<span class="source-line-no">152</span><span id="line.152">         * contributed to other creatures if mixed (mixing a horse with a snake may make the horse scaly, since "scaly"</span>
<span class="source-line-no">153</span><span id="line.153">         * is an unsaid adjective for snakes). Next are adjectives that apply to the "whole" creature's appearance,</span>
<span class="source-line-no">154</span><span id="line.154">         * which don't need to replicate the unsaid adjectives and are often added as a step to randomize a creature;</span>
<span class="source-line-no">155</span><span id="line.155">         * this Collection is often empty. Next are the power adjectives, which are any special abilities a creature</span>
<span class="source-line-no">156</span><span id="line.156">         * might have that aren't immediately visible, like "furious" or "toxic". Last are the power phrases, which</span>
<span class="source-line-no">157</span><span id="line.157">         * follow a format like "can cast arcane spells", "embodies the wilderness", or "constantly drools acid"; it</span>
<span class="source-line-no">158</span><span id="line.158">         * should be able to be put in a sentence after the word "that", like "a snake that can cast arcane spells".</span>
<span class="source-line-no">159</span><span id="line.159">         * &lt;br&gt;</span>
<span class="source-line-no">160</span><span id="line.160">         * The unknown argument determines if descriptions need to include basic properties like calling a Snake scaly</span>
<span class="source-line-no">161</span><span id="line.161">         * (null in this case) or a Pestilence Fiend chitinous (no one knows what that creature is, so a String needs to</span>
<span class="source-line-no">162</span><span id="line.162">         * be given so a player and player character that don't know its name can call it something, like "demon").</span>
<span class="source-line-no">163</span><span id="line.163">         * &lt;br&gt;</span>
<span class="source-line-no">164</span><span id="line.164">         * An example is {@code Chimera SNAKE = new Chimera("snake", null, "head", "tail", "fangs", "eyes", ";",</span>
<span class="source-line-no">165</span><span id="line.165">         * "reptilian", "scaly", "lean", "curvaceous", ";", ";", "toxic");}</span>
<span class="source-line-no">166</span><span id="line.166">         * @param name the name to refer to the creature by and its body parts by when mixed</span>
<span class="source-line-no">167</span><span id="line.167">         * @param unknown true if the creature's basic shape is unlikely to be known by a player, false for animals and</span>
<span class="source-line-no">168</span><span id="line.168">         *                possibly common mythological creatures like dragons</span>
<span class="source-line-no">169</span><span id="line.169">         * @param parts the different body part nouns this creature can contribute to a creature when mixed</span>
<span class="source-line-no">170</span><span id="line.170">         * @param unsaid appearance adjectives that don't need to be said if the creature is familiar</span>
<span class="source-line-no">171</span><span id="line.171">         * @param whole appearance adjectives that apply to the whole creature</span>
<span class="source-line-no">172</span><span id="line.172">         * @param powerAdj power adjectives like "furious" or "fire-breathing"</span>
<span class="source-line-no">173</span><span id="line.173">         * @param powerPhr power phrases like "can cast arcane spells"</span>
<span class="source-line-no">174</span><span id="line.174">         */</span>
<span class="source-line-no">175</span><span id="line.175">        public Chimera(String name, String unknown, Collection&lt;String&gt; parts, Collection&lt;String&gt; unsaid,</span>
<span class="source-line-no">176</span><span id="line.176">                       Collection&lt;String&gt; whole, Collection&lt;String&gt; powerAdj, Collection&lt;String&gt; powerPhr)</span>
<span class="source-line-no">177</span><span id="line.177">        {</span>
<span class="source-line-no">178</span><span id="line.178">            this.name = name;</span>
<span class="source-line-no">179</span><span id="line.179">            this.unknown = unknown;</span>
<span class="source-line-no">180</span><span id="line.180">            if(unknown != null)</span>
<span class="source-line-no">181</span><span id="line.181">                mainForm = unknown;</span>
<span class="source-line-no">182</span><span id="line.182">            else</span>
<span class="source-line-no">183</span><span id="line.183">                mainForm = name;</span>
<span class="source-line-no">184</span><span id="line.184">            this.parts = new OrderedMap&lt;String, List&lt;String&gt;&gt;();</span>
<span class="source-line-no">185</span><span id="line.185">            unsaidAdjectives = new OrderedSet&lt;String&gt;(unsaid);</span>
<span class="source-line-no">186</span><span id="line.186">            wholeAdjectives = new OrderedSet&lt;String&gt;(whole);</span>
<span class="source-line-no">187</span><span id="line.187">            powerAdjectives = new OrderedSet&lt;String&gt;(powerAdj);</span>
<span class="source-line-no">188</span><span id="line.188">            powerPhrases = new OrderedSet&lt;String&gt;(powerPhr);</span>
<span class="source-line-no">189</span><span id="line.189">            ArrayList&lt;String&gt; selfParts = new ArrayList&lt;String&gt;(parts);</span>
<span class="source-line-no">190</span><span id="line.190">            this.parts.put(name, selfParts);</span>
<span class="source-line-no">191</span><span id="line.191">        }</span>
<span class="source-line-no">192</span><span id="line.192"></span>
<span class="source-line-no">193</span><span id="line.193">        /**</span>
<span class="source-line-no">194</span><span id="line.194">         * Get a string description of this monster's appearance and powers.</span>
<span class="source-line-no">195</span><span id="line.195">         * @param capitalize true if the description should start with a capital letter.</span>
<span class="source-line-no">196</span><span id="line.196">         * @return a String description including both appearance and powers</span>
<span class="source-line-no">197</span><span id="line.197">         */</span>
<span class="source-line-no">198</span><span id="line.198">        public String present(boolean capitalize)</span>
<span class="source-line-no">199</span><span id="line.199">        {</span>
<span class="source-line-no">200</span><span id="line.200">            StringBuilder sb = new StringBuilder(), tmp = new StringBuilder();</span>
<span class="source-line-no">201</span><span id="line.201">            if(capitalize)</span>
<span class="source-line-no">202</span><span id="line.202">                sb.append('A');</span>
<span class="source-line-no">203</span><span id="line.203">            else</span>
<span class="source-line-no">204</span><span id="line.204">                sb.append('a');</span>
<span class="source-line-no">205</span><span id="line.205">            int i = 0;</span>
<span class="source-line-no">206</span><span id="line.206">            OrderedSet&lt;String&gt; allAdjectives = new OrderedSet&lt;&gt;(wholeAdjectives);</span>
<span class="source-line-no">207</span><span id="line.207">            if(unknown != null)</span>
<span class="source-line-no">208</span><span id="line.208">                allAdjectives.addAll(unsaidAdjectives);</span>
<span class="source-line-no">209</span><span id="line.209">            allAdjectives.addAll(powerAdjectives);</span>
<span class="source-line-no">210</span><span id="line.210">            for(String adj : allAdjectives)</span>
<span class="source-line-no">211</span><span id="line.211">            {</span>
<span class="source-line-no">212</span><span id="line.212">                tmp.append(adj);</span>
<span class="source-line-no">213</span><span id="line.213">                if(++i &lt; allAdjectives.size())</span>
<span class="source-line-no">214</span><span id="line.214">                    tmp.append(',');</span>
<span class="source-line-no">215</span><span id="line.215">                tmp.append(' ');</span>
<span class="source-line-no">216</span><span id="line.216">            }</span>
<span class="source-line-no">217</span><span id="line.217">            tmp.append(mainForm);</span>
<span class="source-line-no">218</span><span id="line.218">            String ts = tmp.toString();</span>
<span class="source-line-no">219</span><span id="line.219">            if(ts.matches("^[aeiouAEIOU].*"))</span>
<span class="source-line-no">220</span><span id="line.220">                sb.append('n');</span>
<span class="source-line-no">221</span><span id="line.221">            sb.append(' ').append(ts);</span>
<span class="source-line-no">222</span><span id="line.222">            if(!(powerPhrases.isEmpty() &amp;&amp; parts.size() == 1))</span>
<span class="source-line-no">223</span><span id="line.223">                sb.append(' ');</span>
<span class="source-line-no">224</span><span id="line.224">            if(parts.size() &gt; 1)</span>
<span class="source-line-no">225</span><span id="line.225">            {</span>
<span class="source-line-no">226</span><span id="line.226">                sb.append("with the");</span>
<span class="source-line-no">227</span><span id="line.227">                i = 1;</span>
<span class="source-line-no">228</span><span id="line.228">                for(Map.Entry&lt;String, List&lt;String&gt;&gt; ent : parts.entrySet())</span>
<span class="source-line-no">229</span><span id="line.229">                {</span>
<span class="source-line-no">230</span><span id="line.230">                    if(name != null &amp;&amp; name.equals(ent.getKey()))</span>
<span class="source-line-no">231</span><span id="line.231">                        continue;</span>
<span class="source-line-no">232</span><span id="line.232">                    if(ent.getValue().isEmpty())</span>
<span class="source-line-no">233</span><span id="line.233">                        sb.append(" feel");</span>
<span class="source-line-no">234</span><span id="line.234">                    else</span>
<span class="source-line-no">235</span><span id="line.235">                    {</span>
<span class="source-line-no">236</span><span id="line.236">                        int j = 1;</span>
<span class="source-line-no">237</span><span id="line.237">                        for(String p : ent.getValue())</span>
<span class="source-line-no">238</span><span id="line.238">                        {</span>
<span class="source-line-no">239</span><span id="line.239">                            sb.append(' ').append(p);</span>
<span class="source-line-no">240</span><span id="line.240">                            if(j++ &lt; ent.getValue().size() &amp;&amp; ent.getValue().size() &gt; 2)</span>
<span class="source-line-no">241</span><span id="line.241">                                sb.append(',');</span>
<span class="source-line-no">242</span><span id="line.242">                            if(j == ent.getValue().size() &amp;&amp; ent.getValue().size() &gt;= 2)</span>
<span class="source-line-no">243</span><span id="line.243">                                sb.append(" and");</span>
<span class="source-line-no">244</span><span id="line.244">                        }</span>
<span class="source-line-no">245</span><span id="line.245">                    }</span>
<span class="source-line-no">246</span><span id="line.246">                    sb.append(" of a ").append(ent.getKey());</span>
<span class="source-line-no">247</span><span id="line.247"></span>
<span class="source-line-no">248</span><span id="line.248"></span>
<span class="source-line-no">249</span><span id="line.249">                    if(i++ &lt; parts.size() &amp;&amp; parts.size() &gt; 3)</span>
<span class="source-line-no">250</span><span id="line.250">                        sb.append(',');</span>
<span class="source-line-no">251</span><span id="line.251">                    if(i == parts.size() &amp;&amp; parts.size() &gt;= 3)</span>
<span class="source-line-no">252</span><span id="line.252">                        sb.append(" and");</span>
<span class="source-line-no">253</span><span id="line.253">                    sb.append(' ');</span>
<span class="source-line-no">254</span><span id="line.254">                }</span>
<span class="source-line-no">255</span><span id="line.255">            }</span>
<span class="source-line-no">256</span><span id="line.256"></span>
<span class="source-line-no">257</span><span id="line.257">            if(!powerPhrases.isEmpty())</span>
<span class="source-line-no">258</span><span id="line.258">                sb.append("that");</span>
<span class="source-line-no">259</span><span id="line.259">            i = 1;</span>
<span class="source-line-no">260</span><span id="line.260">            for(String phr : powerPhrases)</span>
<span class="source-line-no">261</span><span id="line.261">            {</span>
<span class="source-line-no">262</span><span id="line.262">                sb.append(' ').append(phr);</span>
<span class="source-line-no">263</span><span id="line.263">                if(i++ &lt; powerPhrases.size() &amp;&amp; powerPhrases.size() &gt; 2)</span>
<span class="source-line-no">264</span><span id="line.264">                    sb.append(',');</span>
<span class="source-line-no">265</span><span id="line.265">                if(i == powerPhrases.size() &amp;&amp; powerPhrases.size() &gt;= 2)</span>
<span class="source-line-no">266</span><span id="line.266">                    sb.append(" and");</span>
<span class="source-line-no">267</span><span id="line.267">            }</span>
<span class="source-line-no">268</span><span id="line.268">            return sb.toString();</span>
<span class="source-line-no">269</span><span id="line.269">        }</span>
<span class="source-line-no">270</span><span id="line.270"></span>
<span class="source-line-no">271</span><span id="line.271">        /**</span>
<span class="source-line-no">272</span><span id="line.272">         * Get a string description of this monster's appearance.</span>
<span class="source-line-no">273</span><span id="line.273">         * @param capitalize true if the description should start with a capital letter.</span>
<span class="source-line-no">274</span><span id="line.274">         * @return a String description including only the monster's appearance</span>
<span class="source-line-no">275</span><span id="line.275">         */</span>
<span class="source-line-no">276</span><span id="line.276">        public String presentVisible(boolean capitalize)</span>
<span class="source-line-no">277</span><span id="line.277">        {</span>
<span class="source-line-no">278</span><span id="line.278">            StringBuilder sb = new StringBuilder(), tmp = new StringBuilder();</span>
<span class="source-line-no">279</span><span id="line.279">            if(capitalize)</span>
<span class="source-line-no">280</span><span id="line.280">                sb.append('A');</span>
<span class="source-line-no">281</span><span id="line.281">            else</span>
<span class="source-line-no">282</span><span id="line.282">                sb.append('a');</span>
<span class="source-line-no">283</span><span id="line.283">            int i = 0;</span>
<span class="source-line-no">284</span><span id="line.284"></span>
<span class="source-line-no">285</span><span id="line.285">            OrderedSet&lt;String&gt; allAdjectives = new OrderedSet&lt;&gt;(wholeAdjectives);</span>
<span class="source-line-no">286</span><span id="line.286">            if(unknown != null)</span>
<span class="source-line-no">287</span><span id="line.287">                allAdjectives.addAll(unsaidAdjectives);</span>
<span class="source-line-no">288</span><span id="line.288">            for(String adj : allAdjectives)</span>
<span class="source-line-no">289</span><span id="line.289">            {</span>
<span class="source-line-no">290</span><span id="line.290">                tmp.append(adj);</span>
<span class="source-line-no">291</span><span id="line.291">                if(++i &lt; allAdjectives.size())</span>
<span class="source-line-no">292</span><span id="line.292">                    tmp.append(',');</span>
<span class="source-line-no">293</span><span id="line.293">                tmp.append(' ');</span>
<span class="source-line-no">294</span><span id="line.294">            }</span>
<span class="source-line-no">295</span><span id="line.295">            tmp.append(mainForm);</span>
<span class="source-line-no">296</span><span id="line.296">            String ts = tmp.toString();</span>
<span class="source-line-no">297</span><span id="line.297">            if(ts.matches("^[aeiouAEIOU].*"))</span>
<span class="source-line-no">298</span><span id="line.298">                sb.append('n');</span>
<span class="source-line-no">299</span><span id="line.299">            sb.append(' ').append(ts);</span>
<span class="source-line-no">300</span><span id="line.300">            if(parts.size() &gt; 1)</span>
<span class="source-line-no">301</span><span id="line.301">            {</span>
<span class="source-line-no">302</span><span id="line.302">                sb.append(" with the");</span>
<span class="source-line-no">303</span><span id="line.303">                i = 1;</span>
<span class="source-line-no">304</span><span id="line.304">                for(Map.Entry&lt;String, List&lt;String&gt;&gt; ent : parts.entrySet())</span>
<span class="source-line-no">305</span><span id="line.305">                {</span>
<span class="source-line-no">306</span><span id="line.306">                    if(name != null &amp;&amp; name.equals(ent.getKey()))</span>
<span class="source-line-no">307</span><span id="line.307">                        continue;</span>
<span class="source-line-no">308</span><span id="line.308">                    if(ent.getValue().isEmpty())</span>
<span class="source-line-no">309</span><span id="line.309">                        sb.append(" feel");</span>
<span class="source-line-no">310</span><span id="line.310">                    else</span>
<span class="source-line-no">311</span><span id="line.311">                    {</span>
<span class="source-line-no">312</span><span id="line.312">                        int j = 1;</span>
<span class="source-line-no">313</span><span id="line.313">                        for(String p : ent.getValue())</span>
<span class="source-line-no">314</span><span id="line.314">                        {</span>
<span class="source-line-no">315</span><span id="line.315">                            sb.append(' ').append(p);</span>
<span class="source-line-no">316</span><span id="line.316">                            if(j++ &lt; ent.getValue().size() &amp;&amp; ent.getValue().size() &gt; 2)</span>
<span class="source-line-no">317</span><span id="line.317">                                sb.append(',');</span>
<span class="source-line-no">318</span><span id="line.318">                            if(j == ent.getValue().size() &amp;&amp; ent.getValue().size() &gt;= 2)</span>
<span class="source-line-no">319</span><span id="line.319">                                sb.append(" and");</span>
<span class="source-line-no">320</span><span id="line.320">                        }</span>
<span class="source-line-no">321</span><span id="line.321">                    }</span>
<span class="source-line-no">322</span><span id="line.322">                    sb.append(" of a ").append(ent.getKey());</span>
<span class="source-line-no">323</span><span id="line.323"></span>
<span class="source-line-no">324</span><span id="line.324"></span>
<span class="source-line-no">325</span><span id="line.325">                    if(i++ &lt; parts.size() &amp;&amp; parts.size() &gt; 3)</span>
<span class="source-line-no">326</span><span id="line.326">                        sb.append(',');</span>
<span class="source-line-no">327</span><span id="line.327">                    if(i == parts.size() &amp;&amp; parts.size() &gt;= 3)</span>
<span class="source-line-no">328</span><span id="line.328">                        sb.append(" and");</span>
<span class="source-line-no">329</span><span id="line.329">                    sb.append(' ');</span>
<span class="source-line-no">330</span><span id="line.330">                }</span>
<span class="source-line-no">331</span><span id="line.331">            }</span>
<span class="source-line-no">332</span><span id="line.332"></span>
<span class="source-line-no">333</span><span id="line.333">            return sb.toString();</span>
<span class="source-line-no">334</span><span id="line.334">        }</span>
<span class="source-line-no">335</span><span id="line.335"></span>
<span class="source-line-no">336</span><span id="line.336">        @Override</span>
<span class="source-line-no">337</span><span id="line.337">        public String toString() {</span>
<span class="source-line-no">338</span><span id="line.338">            return name;</span>
<span class="source-line-no">339</span><span id="line.339">        }</span>
<span class="source-line-no">340</span><span id="line.340"></span>
<span class="source-line-no">341</span><span id="line.341">        /**</span>
<span class="source-line-no">342</span><span id="line.342">         * Fuse two Chimera objects by some fraction of influence, using the given RNG and possibly renaming the</span>
<span class="source-line-no">343</span><span id="line.343">         * creature. Does not modify the existing Chimera objects.</span>
<span class="source-line-no">344</span><span id="line.344">         * @param rng the RNG to determine random factors</span>
<span class="source-line-no">345</span><span id="line.345">         * @param newName the name to call the produced Chimera</span>
<span class="source-line-no">346</span><span id="line.346">         * @param other the Chimera to mix with this one</span>
<span class="source-line-no">347</span><span id="line.347">         * @param otherInfluence the fraction between 0.0 and 1.0 of descriptors from other to use</span>
<span class="source-line-no">348</span><span id="line.348">         * @return a new Chimera mixing features from both inputs</span>
<span class="source-line-no">349</span><span id="line.349">         */</span>
<span class="source-line-no">350</span><span id="line.350">        public Chimera mix(RNG rng, String newName, Chimera other, double otherInfluence)</span>
<span class="source-line-no">351</span><span id="line.351">        {</span>
<span class="source-line-no">352</span><span id="line.352">            Chimera next = new Chimera(newName, this);</span>
<span class="source-line-no">353</span><span id="line.353">            List&lt;String&gt; otherParts = other.parts.get(other.name),</span>
<span class="source-line-no">354</span><span id="line.354">                    p2 = rng.randomPortion(otherParts, (int)Math.round(otherParts.size() * otherInfluence * 0.5));</span>
<span class="source-line-no">355</span><span id="line.355">            next.parts.put(other.name, p2);</span>
<span class="source-line-no">356</span><span id="line.356">            String[] unsaid = other.unsaidAdjectives.toArray(new String[0]),</span>
<span class="source-line-no">357</span><span id="line.357">                    talentAdj = other.powerAdjectives.toArray(new String[0]),</span>
<span class="source-line-no">358</span><span id="line.358">                    talentPhr = other.powerPhrases.toArray(new String[0]);</span>
<span class="source-line-no">359</span><span id="line.359">            unsaid = portion(rng, unsaid, (int)Math.round(unsaid.length * otherInfluence));</span>
<span class="source-line-no">360</span><span id="line.360">            talentAdj = portion(rng, talentAdj, (int)Math.round(talentAdj.length * otherInfluence));</span>
<span class="source-line-no">361</span><span id="line.361">            talentPhr = portion(rng, talentPhr, (int)Math.round(talentPhr.length * otherInfluence));</span>
<span class="source-line-no">362</span><span id="line.362">            Collections.addAll(next.wholeAdjectives, unsaid);</span>
<span class="source-line-no">363</span><span id="line.363">            Collections.addAll(next.powerAdjectives, talentAdj);</span>
<span class="source-line-no">364</span><span id="line.364">            Collections.addAll(next.powerPhrases, talentPhr);</span>
<span class="source-line-no">365</span><span id="line.365"></span>
<span class="source-line-no">366</span><span id="line.366">            return next;</span>
<span class="source-line-no">367</span><span id="line.367">        }</span>
<span class="source-line-no">368</span><span id="line.368"></span>
<span class="source-line-no">369</span><span id="line.369">        /**</span>
<span class="source-line-no">370</span><span id="line.370">         * Fuse two Chimera objects by some fraction of influence, using the default RNG and possibly renaming the</span>
<span class="source-line-no">371</span><span id="line.371">         * creature. Does not modify the existing Chimera objects.</span>
<span class="source-line-no">372</span><span id="line.372">         * @param newName the name to call the produced Chimera</span>
<span class="source-line-no">373</span><span id="line.373">         * @param other the Chimera to mix with this one</span>
<span class="source-line-no">374</span><span id="line.374">         * @param otherInfluence the fraction between 0.0 and 1.0 of descriptors from other to use</span>
<span class="source-line-no">375</span><span id="line.375">         * @return a new Chimera mixing features from both inputs</span>
<span class="source-line-no">376</span><span id="line.376">         */</span>
<span class="source-line-no">377</span><span id="line.377">        public Chimera mix(String newName, Chimera other, double otherInfluence)</span>
<span class="source-line-no">378</span><span id="line.378">        {</span>
<span class="source-line-no">379</span><span id="line.379">            return mix(srng, newName, other, otherInfluence);</span>
<span class="source-line-no">380</span><span id="line.380">        }</span>
<span class="source-line-no">381</span><span id="line.381">    }</span>
<span class="source-line-no">382</span><span id="line.382">    public static final Chimera SNAKE = new Chimera("snake", null, "head", "tail", "fangs", "eyes", ";",</span>
<span class="source-line-no">383</span><span id="line.383">            "reptilian", "scaly", "lean", "curvaceous", ";",</span>
<span class="source-line-no">384</span><span id="line.384">            ";",</span>
<span class="source-line-no">385</span><span id="line.385">            "toxic"),</span>
<span class="source-line-no">386</span><span id="line.386">            LION = new Chimera("lion", null, "head", "tail", "legs", "claws", "fangs", "eyes", ";",</span>
<span class="source-line-no">387</span><span id="line.387">                    "hairy", "muscular", ";",</span>
<span class="source-line-no">388</span><span id="line.388">                    ";",</span>
<span class="source-line-no">389</span><span id="line.389">                    "furious"),</span>
<span class="source-line-no">390</span><span id="line.390">            HORSE = new Chimera("horse", null, "head", "tail", "legs", "hooves", "eyes", ";",</span>
<span class="source-line-no">391</span><span id="line.391">                    "fuzzy", "muscular", "lean", ";",</span>
<span class="source-line-no">392</span><span id="line.392">                    ";",</span>
<span class="source-line-no">393</span><span id="line.393">                    "nimble"),</span>
<span class="source-line-no">394</span><span id="line.394">            HAWK = new Chimera("hawk", null, "head", "tail", "legs", "claws", "beak", "eyes", "wings", ";",</span>
<span class="source-line-no">395</span><span id="line.395">                    "feathered", "avian", "lean", ";",</span>
<span class="source-line-no">396</span><span id="line.396">                    ";",</span>
<span class="source-line-no">397</span><span id="line.397">                    "screeching", "nimble"),</span>
<span class="source-line-no">398</span><span id="line.398">            SHOGGOTH = new Chimera("shoggoth", "non-Euclidean ooze", "eyes", "fangs", "pseudopods", ";",</span>
<span class="source-line-no">399</span><span id="line.399">                    "pulpy", "horrid", "tentacled", ";",</span>
<span class="source-line-no">400</span><span id="line.400">                    ";",</span>
<span class="source-line-no">401</span><span id="line.401">                    "terrifying", "regenerating", "semi-corporeal", ";",</span>
<span class="source-line-no">402</span><span id="line.402">                    "shudders between impossible dimensions");</span>
<span class="source-line-no">403</span><span id="line.403"></span>
<span class="source-line-no">404</span><span id="line.404">    /**</span>
<span class="source-line-no">405</span><span id="line.405">     * Constructs a MonsterGen with a random seed for the default RNG.</span>
<span class="source-line-no">406</span><span id="line.406">     */</span>
<span class="source-line-no">407</span><span id="line.407">    public MonsterGen()</span>
<span class="source-line-no">408</span><span id="line.408">    {</span>
<span class="source-line-no">409</span><span id="line.409"></span>
<span class="source-line-no">410</span><span id="line.410">    }</span>
<span class="source-line-no">411</span><span id="line.411">    /**</span>
<span class="source-line-no">412</span><span id="line.412">     * Constructs a MonsterGen with the given seed for the default RNG.</span>
<span class="source-line-no">413</span><span id="line.413">     */</span>
<span class="source-line-no">414</span><span id="line.414">    public MonsterGen(long seed)</span>
<span class="source-line-no">415</span><span id="line.415">    {</span>
<span class="source-line-no">416</span><span id="line.416">        srng.setState(seed);</span>
<span class="source-line-no">417</span><span id="line.417">    }</span>
<span class="source-line-no">418</span><span id="line.418">    /**</span>
<span class="source-line-no">419</span><span id="line.419">     * Constructs a MonsterGen with the given seed (hashing seed with CrossHash) for the default RNG.</span>
<span class="source-line-no">420</span><span id="line.420">     */</span>
<span class="source-line-no">421</span><span id="line.421">    public MonsterGen(String seed)</span>
<span class="source-line-no">422</span><span id="line.422">    {</span>
<span class="source-line-no">423</span><span id="line.423">        srng.setState(CrossHash.hash(seed));</span>
<span class="source-line-no">424</span><span id="line.424">    }</span>
<span class="source-line-no">425</span><span id="line.425"></span>
<span class="source-line-no">426</span><span id="line.426">    /**</span>
<span class="source-line-no">427</span><span id="line.427">     * Randomly add appearance descriptors to a copy of the Chimera creature. Produces a new Chimera, potentially with a</span>
<span class="source-line-no">428</span><span id="line.428">     * different name, and adds the specified count of adjectives (if any are added that the creature already has, they</span>
<span class="source-line-no">429</span><span id="line.429">     * are ignored, and this includes unsaid adjectives if the creature is known).</span>
<span class="source-line-no">430</span><span id="line.430">     * @param rng the RNG to determine random factors</span>
<span class="source-line-no">431</span><span id="line.431">     * @param creature the Chimera to add descriptors to</span>
<span class="source-line-no">432</span><span id="line.432">     * @param newName the name to call the produced Chimera</span>
<span class="source-line-no">433</span><span id="line.433">     * @param adjectiveCount the number of adjectives to add; may add less if some overlap</span>
<span class="source-line-no">434</span><span id="line.434">     * @return a new Chimera with additional appearance descriptors</span>
<span class="source-line-no">435</span><span id="line.435">     */</span>
<span class="source-line-no">436</span><span id="line.436">    public Chimera randomizeAppearance(RNG rng, Chimera creature, String newName, int adjectiveCount)</span>
<span class="source-line-no">437</span><span id="line.437">    {</span>
<span class="source-line-no">438</span><span id="line.438">        Chimera next = new Chimera(newName, creature);</span>
<span class="source-line-no">439</span><span id="line.439">        Collections.addAll(next.wholeAdjectives, portion(rng, adjectives, adjectiveCount));</span>
<span class="source-line-no">440</span><span id="line.440">        next.wholeAdjectives.removeAll(next.unsaidAdjectives);</span>
<span class="source-line-no">441</span><span id="line.441">        return next;</span>
<span class="source-line-no">442</span><span id="line.442">    }</span>
<span class="source-line-no">443</span><span id="line.443"></span>
<span class="source-line-no">444</span><span id="line.444">    /**</span>
<span class="source-line-no">445</span><span id="line.445">     * Randomly add appearance descriptors to a copy of the Chimera creature. Produces a new Chimera, potentially with a</span>
<span class="source-line-no">446</span><span id="line.446">     * different name, and adds the specified count of adjectives (if any are added that the creature already has, they</span>
<span class="source-line-no">447</span><span id="line.447">     * are ignored, and this includes unsaid adjectives if the creature is known).</span>
<span class="source-line-no">448</span><span id="line.448">     * @param creature the Chimera to add descriptors to</span>
<span class="source-line-no">449</span><span id="line.449">     * @param newName the name to call the produced Chimera</span>
<span class="source-line-no">450</span><span id="line.450">     * @param adjectiveCount the number of adjectives to add; may add less if some overlap</span>
<span class="source-line-no">451</span><span id="line.451">     * @return a new Chimera with additional appearance descriptors</span>
<span class="source-line-no">452</span><span id="line.452">     */</span>
<span class="source-line-no">453</span><span id="line.453">    public Chimera randomizeAppearance(Chimera creature, String newName, int adjectiveCount)</span>
<span class="source-line-no">454</span><span id="line.454">    {</span>
<span class="source-line-no">455</span><span id="line.455">        return randomizeAppearance(srng, creature, newName, adjectiveCount);</span>
<span class="source-line-no">456</span><span id="line.456">    }</span>
<span class="source-line-no">457</span><span id="line.457"></span>
<span class="source-line-no">458</span><span id="line.458">    /**</span>
<span class="source-line-no">459</span><span id="line.459">     * Randomly add power descriptors to a copy of the Chimera creature. Produces a new Chimera, potentially with a</span>
<span class="source-line-no">460</span><span id="line.460">     * different name, and adds the specified total count of power adjectives and phrases (if any are added that the</span>
<span class="source-line-no">461</span><span id="line.461">     * creature already has, they are ignored).</span>
<span class="source-line-no">462</span><span id="line.462">     * @param rng the RNG to determine random factors</span>
<span class="source-line-no">463</span><span id="line.463">     * @param creature the Chimera to add descriptors to</span>
<span class="source-line-no">464</span><span id="line.464">     * @param newName the name to call the produced Chimera</span>
<span class="source-line-no">465</span><span id="line.465">     * @param powerCount the number of adjectives to add; may add less if some overlap</span>
<span class="source-line-no">466</span><span id="line.466">     * @return a new Chimera with additional power descriptors</span>
<span class="source-line-no">467</span><span id="line.467">     */</span>
<span class="source-line-no">468</span><span id="line.468">    public Chimera randomizePowers(RNG rng, Chimera creature, String newName, int powerCount)</span>
<span class="source-line-no">469</span><span id="line.469">    {</span>
<span class="source-line-no">470</span><span id="line.470">        Chimera next = new Chimera(newName, creature);</span>
<span class="source-line-no">471</span><span id="line.471">        int adjs = rng.nextInt(powerCount + 1), phrs = powerCount - adjs;</span>
<span class="source-line-no">472</span><span id="line.472">        Collections.addAll(next.powerAdjectives, portion(rng, powerAdjectives, adjs));</span>
<span class="source-line-no">473</span><span id="line.473">        Collections.addAll(next.powerPhrases, portion(rng, powerPhrases, phrs));</span>
<span class="source-line-no">474</span><span id="line.474">        return next;</span>
<span class="source-line-no">475</span><span id="line.475">    }</span>
<span class="source-line-no">476</span><span id="line.476"></span>
<span class="source-line-no">477</span><span id="line.477">    /**</span>
<span class="source-line-no">478</span><span id="line.478">     * Randomly add power descriptors to a copy of the Chimera creature. Produces a new Chimera, potentially with a</span>
<span class="source-line-no">479</span><span id="line.479">     * different name, and adds the specified total count of power adjectives and phrases (if any are added that the</span>
<span class="source-line-no">480</span><span id="line.480">     * creature already has, they are ignored).</span>
<span class="source-line-no">481</span><span id="line.481">     * @param creature the Chimera to add descriptors to</span>
<span class="source-line-no">482</span><span id="line.482">     * @param newName the name to call the produced Chimera</span>
<span class="source-line-no">483</span><span id="line.483">     * @param powerCount the number of adjectives to add; may add less if some overlap</span>
<span class="source-line-no">484</span><span id="line.484">     * @return a new Chimera with additional power descriptors</span>
<span class="source-line-no">485</span><span id="line.485">     */</span>
<span class="source-line-no">486</span><span id="line.486">    public Chimera randomizePowers(Chimera creature, String newName, int powerCount)</span>
<span class="source-line-no">487</span><span id="line.487">    {</span>
<span class="source-line-no">488</span><span id="line.488">        return randomizePowers(srng, creature, newName, powerCount);</span>
<span class="source-line-no">489</span><span id="line.489">    }</span>
<span class="source-line-no">490</span><span id="line.490"></span>
<span class="source-line-no">491</span><span id="line.491">    /**</span>
<span class="source-line-no">492</span><span id="line.492">     * Randomly add appearance and power descriptors to a new Chimera creature with random body part adjectives.</span>
<span class="source-line-no">493</span><span id="line.493">     * Produces a new Chimera with the specified name, and adds the specified total count (detail) of appearance</span>
<span class="source-line-no">494</span><span id="line.494">     * adjectives, power adjectives and phrases, and the same count (detail) of body parts.</span>
<span class="source-line-no">495</span><span id="line.495">     * @param rng the RNG to determine random factors</span>
<span class="source-line-no">496</span><span id="line.496">     * @param newName the name to call the produced Chimera</span>
<span class="source-line-no">497</span><span id="line.497">     * @param detail the number of adjectives and phrases to add, also the number of body parts</span>
<span class="source-line-no">498</span><span id="line.498">     * @return a new Chimera with random traits</span>
<span class="source-line-no">499</span><span id="line.499">     */</span>
<span class="source-line-no">500</span><span id="line.500">    public Chimera randomize(RNG rng, String newName, int detail)</span>
<span class="source-line-no">501</span><span id="line.501">    {</span>
<span class="source-line-no">502</span><span id="line.502">        ArrayList&lt;String&gt; ps = new ArrayList&lt;String&gt;();</span>
<span class="source-line-no">503</span><span id="line.503">        Collections.addAll(ps, portion(rng, components, detail));</span>
<span class="source-line-no">504</span><span id="line.504">        Chimera next = new Chimera(newName, "thing", ps, new ArrayList&lt;String&gt;(),</span>
<span class="source-line-no">505</span><span id="line.505">                new ArrayList&lt;String&gt;(), new ArrayList&lt;String&gt;(), new ArrayList&lt;String&gt;());</span>
<span class="source-line-no">506</span><span id="line.506">        if(detail &gt; 0) {</span>
<span class="source-line-no">507</span><span id="line.507">            int powerCount = rng.nextInt(detail), bodyCount = detail - powerCount;</span>
<span class="source-line-no">508</span><span id="line.508">            int adjs = rng.nextInt(powerCount + 1), phrs = powerCount - adjs;</span>
<span class="source-line-no">509</span><span id="line.509"></span>
<span class="source-line-no">510</span><span id="line.510">            Collections.addAll(next.unsaidAdjectives, portion(rng, adjectives, bodyCount));</span>
<span class="source-line-no">511</span><span id="line.511">            Collections.addAll(next.powerAdjectives, portion(rng, powerAdjectives, adjs));</span>
<span class="source-line-no">512</span><span id="line.512">            Collections.addAll(next.powerPhrases, portion(rng, powerPhrases, phrs));</span>
<span class="source-line-no">513</span><span id="line.513">        }</span>
<span class="source-line-no">514</span><span id="line.514">        return next;</span>
<span class="source-line-no">515</span><span id="line.515">    }</span>
<span class="source-line-no">516</span><span id="line.516"></span>
<span class="source-line-no">517</span><span id="line.517">    /**</span>
<span class="source-line-no">518</span><span id="line.518">     * Randomly add appearance and power descriptors to a new Chimera creature with random body part adjectives.</span>
<span class="source-line-no">519</span><span id="line.519">     * Produces a new Chimera with the specified name, and adds the specified total count (detail) of appearance</span>
<span class="source-line-no">520</span><span id="line.520">     * adjectives, power adjectives and phrases, and the same count (detail) of body parts.</span>
<span class="source-line-no">521</span><span id="line.521">     * @param newName the name to call the produced Chimera</span>
<span class="source-line-no">522</span><span id="line.522">     * @param detail the number of adjectives and phrases to add, also the number of body parts</span>
<span class="source-line-no">523</span><span id="line.523">     * @return a new Chimera with random traits</span>
<span class="source-line-no">524</span><span id="line.524">     */</span>
<span class="source-line-no">525</span><span id="line.525">    public Chimera randomize(String newName, int detail)</span>
<span class="source-line-no">526</span><span id="line.526">    {</span>
<span class="source-line-no">527</span><span id="line.527">        return randomize(srng, newName, detail);</span>
<span class="source-line-no">528</span><span id="line.528">    }</span>
<span class="source-line-no">529</span><span id="line.529"></span>
<span class="source-line-no">530</span><span id="line.530">    /**</span>
<span class="source-line-no">531</span><span id="line.531">     * Randomly add appearance and power descriptors to a new Chimera creature with random body part adjectives.</span>
<span class="source-line-no">532</span><span id="line.532">     * Produces a new Chimera with a random name using FakeLanguageGen, and adds a total of 5 appearance adjectives,</span>
<span class="source-line-no">533</span><span id="line.533">     * power adjectives and phrases, and 5 body parts.</span>
<span class="source-line-no">534</span><span id="line.534">     * @return a new Chimera with random traits</span>
<span class="source-line-no">535</span><span id="line.535">     */</span>
<span class="source-line-no">536</span><span id="line.536">    public Chimera randomize()</span>
<span class="source-line-no">537</span><span id="line.537">    {</span>
<span class="source-line-no">538</span><span id="line.538">        return randomize(srng, randomName(srng), 5);</span>
<span class="source-line-no">539</span><span id="line.539">    }</span>
<span class="source-line-no">540</span><span id="line.540"></span>
<span class="source-line-no">541</span><span id="line.541">    /**</span>
<span class="source-line-no">542</span><span id="line.542">     * Gets a random name as a String using FakeLanguageGen.</span>
<span class="source-line-no">543</span><span id="line.543">     * @param rng the RNG to use for random factors</span>
<span class="source-line-no">544</span><span id="line.544">     * @return a String meant to be used as a creature name</span>
<span class="source-line-no">545</span><span id="line.545">     */</span>
<span class="source-line-no">546</span><span id="line.546">    public String randomName(RNG rng)</span>
<span class="source-line-no">547</span><span id="line.547">    {</span>
<span class="source-line-no">548</span><span id="line.548">        return FakeLanguageGen.FANTASY_NAME.word(rng, false, rng.between(2, 4));</span>
<span class="source-line-no">549</span><span id="line.549">    }</span>
<span class="source-line-no">550</span><span id="line.550"></span>
<span class="source-line-no">551</span><span id="line.551">    /**</span>
<span class="source-line-no">552</span><span id="line.552">     * Gets a random name as a String using FakeLanguageGen.</span>
<span class="source-line-no">553</span><span id="line.553">     * @return a String meant to be used as a creature name</span>
<span class="source-line-no">554</span><span id="line.554">     */</span>
<span class="source-line-no">555</span><span id="line.555">    public String randomName()</span>
<span class="source-line-no">556</span><span id="line.556">    {</span>
<span class="source-line-no">557</span><span id="line.557">        return randomName(srng);</span>
<span class="source-line-no">558</span><span id="line.558">    }</span>
<span class="source-line-no">559</span><span id="line.559"></span>
<span class="source-line-no">560</span><span id="line.560">    private static String[] portion(RNG rng, String[] source, int amount)</span>
<span class="source-line-no">561</span><span id="line.561">    {</span>
<span class="source-line-no">562</span><span id="line.562">        return rng.randomPortion(source, new String[Math.min(source.length, amount)]);</span>
<span class="source-line-no">563</span><span id="line.563">    }</span>
<span class="source-line-no">564</span><span id="line.564"></span>
<span class="source-line-no">565</span><span id="line.565">}</span>




























































</pre>
</div>
</main>
</body>
</html>
